#!python

import os
import sys

def cd(path):
    if os.path.isdir(path) or path == "../":
        os.chdir(path)
    else:
        print("wrong path")
        return

def run_app(path, args):
    file = open(path)
    text = file.read()
    if text.startswith("#!python"):
        os.system("python "+path+" "+args)
    else:
        print("can't run")

def main():
    print("launching command line")
    print("type help for basic info")

    os.chdir("Jeff-OS/")
    sys.path.pop(0)
    sys.path.insert(0, os.getcwd()+"/sys/lib/")
    global OS_PATH
    OS_PATH = os.getcwd()

    i = ""
    while i != "exit" or i != "quit":
        i = input("cmd>")
        args = i.split(" ")
        app_name = args[0]
        args = " ".join(args)
        if app_name == "cd":
            cd(i.split(" ")[-1])
        elif os.path.isfile(OS_PATH+"/sys/bin/"+app_name):
            run_app(OS_PATH+"/sys/bin/"+app_name, args)
        else:
            print(f"app '{i}' not found")

if __name__ == "__main__":
    main()